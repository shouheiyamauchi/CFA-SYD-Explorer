<style media="screen">
  #map {
    height: 340px;
    border-width: 1px;
    border-color: #CACACA;
    border-style: solid;
    border-radius: 5px;
  }
</style>

<div class="grid-stack-item"
data-gs-x=<%= @dashboard_grid[@index]["x"] %> data-gs-y=<%= @dashboard_grid[@index]["y"] %>
data-gs-width=<%= @dashboard_grid[@index]["width"] %> data-gs-height=<%= @dashboard_grid[@index]["height"] %> data-custom-id="map" data-gs-no-resize="yes">

  <div class="grid-stack-item-content">
    <div class="title">
      <i class="material-icons">map</i> Explorer map<span style="float: right;"><i class="material-icons">zoom_out_map</i></span>
    </div>
    <div class="content">
      <div id="map"></div>
    </div>
  </div>

</div>

<!-- Google maps data -->
<script>
  var map;
  function initMap() {
    map = new google.maps.Map(document.getElementById('map'), {
      zoom: 10,
      zoomControl: true,
      disableDefaultUI: true,
      center: new google.maps.LatLng(-33.85, 151),
      mapTypeId: 'roadmap',
      styles: [
    {
        "featureType": "all",
        "elementType": "labels",
        "stylers": [
            {
                "visibility": "off"
            }
        ]
    },
    {
        "featureType": "landscape",
        "elementType": "all",
        "stylers": [
            {
                "visibility": "on"
            },
            {
                "color": "#f3f4f4"
            }
        ]
    },
    {
        "featureType": "landscape.man_made",
        "elementType": "geometry",
        "stylers": [
            {
                "weight": 0.9
            },
            {
                "visibility": "off"
            }
        ]
    },
    {
        "featureType": "poi.park",
        "elementType": "geometry.fill",
        "stylers": [
            {
                "visibility": "on"
            },
            {
                "color": "#83cead"
            }
        ]
    },
    {
        "featureType": "road",
        "elementType": "all",
        "stylers": [
            {
                "visibility": "on"
            },
            {
                "color": "#ffffff"
            }
        ]
    },
    {
        "featureType": "road",
        "elementType": "labels",
        "stylers": [
            {
                "visibility": "off"
            }
        ]
    },
    {
        "featureType": "road.highway",
        "elementType": "all",
        "stylers": [
            {
                "visibility": "on"
            },
            {
                "color": "#fee379"
            }
        ]
    },
    {
        "featureType": "road.arterial",
        "elementType": "all",
        "stylers": [
            {
                "visibility": "on"
            },
            {
                "color": "#fee379"
            }
        ]
    },
    {
        "featureType": "water",
        "elementType": "all",
        "stylers": [
            {
                "visibility": "on"
            },
            {
                "color": "#7fc8ed"
            }
        ]
    }
]
    });

    var icons = {
      parking: {
        icon: '<%= image_url("markers/parking-meter-export.png") %>'
      },
      library: {
        icon: '<%= image_url("markers/library.png") %>'
      },
      info: {
        icon: '<%= image_url("markers/information.png") %>'
      },
      kiosk: {
        icon: '<%= image_url("markers/kiosk.png") %>'
      },
      lake: {
        icon: '<%= image_url("markers/lake.png") %>'
      },
      laterne: {
        icon: '<%= image_url("markers/laterne.png") %>'
      },
      levelcrossing: {
        icon: '<%= image_url("markers/levelcrossing.png") %>'
      }
    };

    var features = [
      {
        position: new google.maps.LatLng(-33.81721, 151.22630),
        type: 'info'
      }, {
        position: new google.maps.LatLng(-34.02539, 151.22820),
        type: 'laterne'
      }, {
        position: new google.maps.LatLng(-33.93747, 150.89089),
        type: 'lake'
      }, {
        position: new google.maps.LatLng(-33.88910, 150.87089),
        type: 'info'
      }, {
        position: new google.maps.LatLng(-33.91725, 150.86089),
        type: 'kiosk'
      }, {
        position: new google.maps.LatLng(-33.81872, 150.86089),
        type: 'laterne'
      }, {
        position: new google.maps.LatLng(-33.91784, 151.23094),
        type: 'levelcrossing'
      }, {
        position: new google.maps.LatLng(-33.71682, 151.24149),
        type: 'levelcrossing'
      }, {
        position: new google.maps.LatLng(-34.01790, 151.10463),
        type: 'info'
      }, {
        position: new google.maps.LatLng(-33.91666, 151.00468),
        type: 'parking'
      }, {
        position: new google.maps.LatLng(-33.816988, 150.933640),
        type: 'info'
      }, {
        position: new google.maps.LatLng(-33.91662347903106, 151.22879464019775),
        type: 'parking'
      }, {
        position: new google.maps.LatLng(-33.916365282092855, 151.22937399734496),
        type: 'parking'
      }, {
        position: new google.maps.LatLng(-33.91665018901448, 151.2282474695587),
        type: 'parking'
      }, {
        position: new google.maps.LatLng(-33.919543720969806, 151.23112279762267),
        type: 'parking'
      }, {
        position: new google.maps.LatLng(-33.91608037421864, 151.23288232673644),
        type: 'parking'
      }, {
        position: new google.maps.LatLng(-33.91851096391805, 151.2344058214569),
        type: 'parking'
      }, {
        position: new google.maps.LatLng(-33.91818154739766, 151.2346203981781),
        type: 'parking'
      }, {
        position: new google.maps.LatLng(-33.91727341958453, 151.23348314155578),
        type: 'library'
      }
    ];

    // Create markers.
    features.forEach(function(feature) {
      var marker = new google.maps.Marker({
        position: feature.position,
        icon: icons[feature.type].icon,
        map: map
      });
    });
  }
</script>
<script async defer
src="https://maps.googleapis.com/maps/api/js?key=<%= ENV['GOOGLE_API'] %>&callback=initMap">
</script>
